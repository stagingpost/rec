<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Recording-data download for multi-recording.</title>
</head>
<body>
<h1>録画テスト</h1>
<video controls width="250"　id="video1">MyVideo</video>

<script>
// $(document).ready(function(){

function f1(){
	navigator.mediaDevices = navigator.mediaDevices || ((navigator.mozGetUserMedia || navigator.webkitGetUserMedia) ? {
	   getUserMedia: function(c) {
	     return new Promise(function(y, n) {
	       (navigator.mozGetUserMedia ||
	        navigator.webkitGetUserMedia).call(navigator, c, y, n);
	     });
	   }
	} : null);

	if (!navigator.mediaDevices) {
	  console.log("getUserMedia() not supported.");
	  return;
	}

	// Prefer camera resolution nearest to 1280x720.

	var constraints = { audio: true, video: { width: 1280, height: 720 } };
	console.log("step 0");
	navigator.mediaDevices.getUserMedia(constraints)
	.then(function(stream) {
	  console.log("step 1");
	  var video = document.querySelector('video');
	  console.log("video:[" + video + "]");
	  video.srcObject = stream
	  video.onloadedmetadata = function(e) {
	    video.play();
	  };
	})
	.catch(function(err) {
	  console.log(err.name + ": " + err.message);
	});
}

f1();

// });
</script>

</body>
</html>
